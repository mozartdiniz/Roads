/*! roads 2016-05-18 */
var Ro={controllers:{},init:function(a){Ro.Session=Ro.Session={},Ro.Environment.platform.isWindowsPhoneUniversalApp=!(!window.WinJS||!window.WinJS.Application);var b=function(){var b=document.querySelector("ro-loader");b&&b.show();var c=document.querySelectorAll('link[rel="import"]'),d=document.querySelector("ro-app ro-scroll");Ro.views={};for(var e=0;e<c.length;e++){var f=c[e]["import"].body.querySelector("ro-view"),g=f.cloneNode(!0);if(Ro.views[f.getAttribute("id")]={dom:g,controller:{}},null!==f.getAttribute("mainpage")){d.appendChild(g);for(key in Ro.controllers)key===f.getAttribute("id")&&(Ro.controllers[key].view=f);b.hide()}}var h=document.querySelector("ro-stage[scroll]");h&&(Ro.Globals.roAppScroll=new IScroll(h,{probeType:3,mouseWheel:!0,bounce:!0,keyBindings:!0,invertWheelDirection:!1,momentum:!0,fadeScrollbars:!1,scrollbars:!1,interactiveScrollbars:!1,resizeScrollbars:!1,shrinkScrollbars:!1,click:!1,preventDefaultException:{tagName:/.*/}})),setTimeout(a,100)};window.addEventListener("HTMLImportsLoaded",b.bind(this)),document.addEventListener("deviceready",function(){var a=document.querySelector("ro-app");a.style.webkitTransition="10ms",a.style.height=window.innerHeight+"px",document.addEventListener("showkeyboard",function(){setTimeout(function(){var b=document.activeElement.getBoundingClientRect().top+50,c=window.innerHeight;if(b>c){var d=document.querySelector("ro-view#"+a.activeView);d.style.webkitTransition="1s",d.style.webkitTransform="translateY(-200px)"}},100)},!1),document.addEventListener("hidekeyboard",function(){var b=document.querySelector("ro-view#"+a.activeView);b.style.webkitTransition="10ms",b.style.webkitTransform="translateY(0)"},!1),Ro.Environment.platform.isWindowsPhoneUniversalApp?Windows.Phone.UI.Input.HardwareButtons.onbackpressed=function(a){a.handled=!0,Ro.Globals.backButtonFunction(a)}:document.addEventListener("backbutton",function(){Ro.Globals.backButtonFunction()},!1)},!1)},styleGenerator:function(a){var b="";for(key in a)b+=key+": "+a[key]+"; ";return b},templateEngine:function(a,b){var c,d,e,f=/{{([^}}]+)?}}/g,g=0;if(a)for(;match=a.match(f);)g=match[0].indexOf("|"),g>0?(c=match[0].split("|")[1].replace("}}","").trim(),c.indexOf(":")>0&&(e=c.split(":")[1],c=c.split(":")[0]),d=match[0].split("|")[0].replace("{{","").trim()):d=match[0].replace("{{","").replace("}}","").trim(),a=g>0&&Ro.Filter.filters[c]?b&&"i18n"!==c?a.replace(match[0],Ro.Filter.filters[c](this.findByKey(b,d),d,e)):a.replace(match[0],Ro.Filter.filters[c](d,e)):a.replace(match[0],this.findByKey(b,d));return a},findByKey:function(a,b){for(var c=a,d=b.split("."),e=0,f=d.length;f>e;e++)c&&(c=c[d[e]]);return c||""},dateToIEandSafari:function(a){return(a.substring(0,a.lastIndexOf("+")+4)+"Z").replace("+",".")},extend:function(a,b){for(k in a)b[k]||(b[k]=a[k]);return b}},Ro=Ro||{};Ro.i18n={defaults:{currency:"US$",date:"MM/dd/yyyy",decimalSymbol:",",digitalGrouping:".",language:"en",time:"HH:mm",systemOfMeasurement:"METRIC"},translations:{},translateView:function(a){for(var b=a.querySelectorAll("[i18n]"),c=b.length-1;c>=0;c--)this.translateElement(b[c])},translateElement:function(a){var b=a.getAttribute("i18n");switch(b){case"":a.innerHTML=Ro.templateEngine(a.getAttribute("i18nKey"));break;default:a.setAttribute(b,Ro.templateEngine(a.getAttribute("i18nKey")))}},getTranslationByKey:function(a){var b=Ro.i18n.translations[a];return b?b:a},getTranslationByKeyOrAlternative:function(a,b){var c=Ro.i18n.getTranslationByKey(a);return b&&c===a?b:c}};var Ro=Ro||{};Ro.Http=function(){this.url="",this.method="get",this.async=!0,this.data=null,this.contentType="application/json",this.customHeader=null,this.success=null,this.timeout=3e4,this.ontimeout=null,this.roSuccess=null,this.multipart=null,this.error=null,this.send=function(){var a=new XMLHttpRequest;a.open(this.method,this.url,this.async),this.multipart||a.setRequestHeader("Content-Type",this.contentType),a.setRequestHeader("Cache-Control","no-cache"),a.setRequestHeader("Pragma","no-cache"),this.customHeader&&this.customHeader.length&&this.customHeader.forEach(function(b){a.setRequestHeader(b.key,b.value)}),a.withCredentials=!0,a.onreadystatechange=this.sendCallback.bind(this),a.ontimeout=function(a){return function(){a.ontimeout&&a.ontimeout(this,a)}}(this),a.send(this.data),this.dropConnection=setTimeout(function(a){return function(){a.abort()}}(a),this.timeout)},this.sendCallback=function(a){var b=a.target,c="";4!==b.readyState||200!==b.status&&201!==b.status&&204!==b.status?4===b.readyState&&this.error&&this.error(b):(clearInterval(this.dropConnection),this.success&&(c=b.responseText&&"application/json"===this.contentType?JSON.parse(b.responseText):b.responseText,this.success(c,b)))}};var Ro=Ro||{};Ro.Globals={backButtonFunction:function(){console.log("No back function defined")}};var Ro=Ro||{};Ro.Filter={filters:{date:function(a,b,c){if(!a)throw"Roads.Filter.date: dateValue is mandatory";var d=c||Ro.i18n.defaults.date,e=new Date(a),f=e.getUTCFullYear(),g=e.getUTCDate(),h=e.getUTCMonth()+1;return d=d.replace(/yyyy/g,f),d=d.replace(/yy/g,String(f).substr(2,2)),d=d.replace(/MM/g,10>h?"0"+h:h),d=d.replace(/M/g,h),d=d.replace(/dd/g,10>g?"0"+g:g),d=d.replace(/d/g,g)},toDate:function(a,b){var c=Ro.i18n.defaults.date+" "+Ro.i18n.defaults.time,d=b?b:c,e=function(b){return parseInt(a.substring(d.indexOf(b),d.lastIndexOf(b)+1))},f=e("y"),g=e("M"),h=e("d"),i=e("H")||e("h")||0,j=e("m")||0,k=e("s")||0,l=d.match(/h/),m=d.match(/T|\+0000|Z/);return 2===f.toString().length&&(f+=f>68?1900:2e3),l&&(i=2*i),m?new Date(Date.UTC(f,g-1,h,i,j,k)):new Date(f,g-1,h,i,j,k)},time:function(a,b,c){if(!a)throw"Roads.Filter.date: timeValue is mandatory";(Ro.Environment.platform.isWPhone||Ro.Environment.platform.isIOS)&&"string"==typeof a&&(a=Ro.dateToIEandSafari(a));var d=c||Ro.i18n.defaults.time,e=new Date(a),f=e.getHours(),g=(f+11)%12+1,h=e.getMinutes(),i=e.getSeconds(),j=f>=12?"pm":"am";return d=d.replace(/HH/g,10>f?"0"+f:f),d=d.replace(/H/g,f),d=d.replace(/hh/g,10>g?"0"+g:g),d=d.replace(/h/g,g),d=d.replace(/mm/g,10>h?"0"+h:h),d=d.replace(/ss/g,i),d=d.replace(/a/g,j)},"float":function(a,b){return a?(b&&("string"==typeof a&&(a=parseFloat(a)),a=a.toFixed(b)),(a+"").replace(".",Ro.i18n.defaults.decimalSymbol)||""):"0"},i18n:function(a){return Ro.i18n.translations[a]||a}},register:function(a,b){if(!a)throw"Roads.Filter.register: filterName is mandatory";this.filters[a]=b}};var Ro=Ro||{};Ro.Events={click:function(){return Ro.Environment.isTouchDevice?"touchstart":"click"}};var Ro=Ro||{};Ro.Environment={isTouchDevice:!!("ontouchstart"in window),getIOSVersion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}},platform:{androidVersion:function(){var a=navigator.userAgent.match(/Android([^;]*)/);return a&&a.length>1?parseInt(a[1],10):!1}(),isAndroid:null!==navigator.userAgent.match("Android"),isIPhone:null!==navigator.userAgent.match("iPhone"),isIPad:null!==navigator.userAgent.match("iPad"),isWPhone:!!navigator.userAgent.match(/Trident/),isIOS:!(!navigator.userAgent.match("iPhone")&&!navigator.userAgent.match("iPad")),isFxOS:!(!navigator.userAgent.match(/Mozilla\/5.0 \(Mobile;/)&&!navigator.userAgent.match("iPad")),isWindowsPhoneUniversalApp:!1}};var Ro=Ro||{};Ro.Controller=function(a,b){var c=function(){};if(b)for(key in b)c.prototype[key]=b[key];return function(b){Ro.controllers[a]=new c,b&&(c.prototype.viewID=b,c.prototype.view=Ro.views[b].dom,Ro.views[b].controller=Ro.controllers[a]),Ro.controllers[a].init()}},function(){xtag.register("ro-app",{lifecycle:{created:function(){this.innerHTML="<ro-scroll></ro-scroll>";var a=function(){var a=document.querySelector("style#roViewStyles");a||(a=document.createElement("style"),a.id="roViewStyles",document.head.appendChild(a)),a.innerHTML="ro-view { height: "+window.innerHeight+"px}"};document.addEventListener("deviceready",function(){setTimeout(a,500)}),window.addEventListener("orientationchange",function(){setTimeout(a,500)})},inserted:function(){},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{saveAddView:function(a){howManyScreensCanLeft=0,RoApp.firstChild.childNodes.length>howManyScreensCanLeft&&RoApp.firstChild.childNodes[0].id!==a.id&&RoApp.firstChild.removeChild(RoApp.firstChild.childNodes[0]),RoApp.firstChild.appendChild(xtag.clone(a))},putViewsInFirstPosition:function(){var a=document.querySelectorAll("ro-view:not([mainPage])"),b=document.querySelector("ro-view[mainPage]");if(b&&(Ro.i18n.translateView(b),Ro.Environment.platform.isAndroid?b.setAttribute("animation","to"):(b.style.zIndex=1,b.style.webkitTransition="10ms",b.style.transition="10ms",b.style.webkitTransform="translateX(0)",b.style.transform="translateX(0)"),RoApp.activeView=b.id),a)if(Ro.Environment.platform.isAndroid)for(var c=0,d=a.length;d>c;c++)a[c].setAttribute("animation","from");else for(var c=0,d=a.length;d>c;c++)a[c].style.zIndex=2,a[c].style.webkitTransform="translateX("+window.innerWidth+"px)",a[c].style.transform="translateX("+window.innerWidth+"px)",a[c].style.webkitTransition="10ms",a[c].style.transition="10ms"},showController:function(a){if(console.log("controller.viewID: "+a.viewID),!a)throw"controller object is mandatory";var b=document.getElementById(RoApp.activeView),c=a,d=document.getElementById(a.viewID);d||this.saveAddView(a.view),a.show&&a.show(b),Ro.Environment.platform.isWPhone?c.view.style.cssText=Ro.styleGenerator({transition:"200ms",transitionTimingFunction:"linear",webkitTransform:"translateX(0)",transform:"translateX(0)"}):Ro.Environment.platform.isIOS?(c.view.style.transition="300ms",c.view.style.transitionTimingFunction="linear",c.view.style.webkitTransform="translateX(0)",c.view.style.transform="translateX(0)"):c.view.setAttribute("animation","to"),Ro.Environment.platform.isWPhone?b.style.cssText=Ro.styleGenerator({transition:"300ms",transitionTimingFunction:"linear",webkitTransform:"translateX(-"+window.innerWidth+"px)",transform:"translateX(-"+window.innerWidth+"px)"}):Ro.Environment.platform.isIOS?(b.style.transition="300ms",b.style.transitionTimingFunction="linear",b.style.webkitTransform="translateX(-"+window.innerWidth+"px)",b.style.transform="translateX(-"+window.innerWidth+"px)"):b.setAttribute("animation","from"),Ro.i18n.translateView(c.view),setTimeout(function(a){return function(){a.style.zIndex=2}}(c.view),50),this.activeView=c.viewID},gotoView:function(a,b){var c=Ro.views[b].controller,d=Ro.views[a].controller;console.log("from: "+a+" -> "+b);var e=Ro.views[b].dom;if(appendedTo=document.getElementById(b),d.beforeDelete&&d.beforeDelete(),appendedTo||(c.view=e,this.saveAddView(e)),!d.view)throw'ro-view: "From" view can not be found';if(!c.view)throw'ro-view: "To" view can not be found';if(a===b)throw'ro-view: "To" and "From" can not be the same';var f=document.querySelectorAll("ro-float-menu");if(f&&f.length)for(var g=0,h=f.length;h>g;g++)f[g].hideItems();c.show&&c.show(a),Ro.Environment.platform.isWPhone?c.view.style.cssText=Ro.styleGenerator({transition:"200ms",transitionTimingFunction:"linear",webkitTransform:"translateX(0)",transform:"translateX(0)"}):Ro.Environment.platform.isIOS?(c.view.style.transition="300ms",c.view.style.transitionTimingFunction="linear",c.view.style.webkitTransform="translateX(0)",c.view.style.transform="translateX(0)"):c.view.setAttribute("animation","to"),Ro.Environment.platform.isWPhone?d.view.style.cssText=Ro.styleGenerator({transition:"300ms",transitionTimingFunction:"linear",webkitTransform:"translateX(-"+window.innerWidth+"px)",transform:"translateX(-"+window.innerWidth+"px)"}):Ro.Environment.platform.isIOS?(d.view.style.transition="300ms",d.view.style.transitionTimingFunction="linear",d.view.style.webkitTransform="translateX(-"+window.innerWidth+"px)",d.view.style.transform="translateX(-"+window.innerWidth+"px)"):d.view.setAttribute("animation","from"),Ro.i18n.translateView(c.view),setTimeout(function(a,b){return function(){a.style.zIndex=2,b.style.zIndex=3}}(c.view,d.view),50),this.activeView=b,Ro.views[a]&&Ro.views[a].dom&&Ro.views[a].dom.setAttribute("background","true"),Ro.views[b]&&Ro.views[b].dom&&Ro.views[b].dom.setAttribute("background","false")},backtoView:function(a,b){console.log("from: "+a+" -> "+b);var c=Ro.views[b].controller,d=Ro.views[a].controller,e=Ro.views[b].dom;if(appendedTo=document.getElementById(b),d.beforeDelete&&d.beforeDelete(),appendedTo||(c.view=e,this.saveAddView(e)),!d.view)throw'ro-view: "From" view can not be found';if(!c.view)throw'ro-view: "To" view can not be found';if(a===b)throw'ro-view: "To" and "From" can not be the same';c.show&&c.show(a),Ro.Environment.platform.isWPhone?c.view.style.cssText=Ro.styleGenerator({transition:"300ms",transitionTimingFunction:"linear",webkitTransform:"translateX(0)",transform:"translateX(0)"}):Ro.Environment.platform.isIOS?(c.view.style.transition="300ms",c.view.style.transitionTimingFunction="linear",c.view.style.webkitTransform="translateX(0)",c.view.style.transform="translateX(0)"):c.view.setAttribute("animation","to"),Ro.Environment.platform.isWPhone?d.view.style.cssText=Ro.styleGenerator({transition:"300ms",transitionTimingFunction:"linear",webkitTransform:"translateX(-"+window.innerWidth+"px)",transform:"translateX(-"+window.innerWidth+"px)"}):Ro.Environment.platform.isIOS?(d.view.style.transition="300ms",d.view.style.transitionTimingFunction="linear",d.view.style.webkitTransform="translateX("+window.innerWidth+"px)",d.view.style.transform="translateX("+window.innerWidth+"px)"):d.view.setAttribute("animation","from"),Ro.i18n.translateView(c.view),setTimeout(function(a,b){return function(){a.style.zIndex=3,b.style.zIndex=2}}(c.view,d.view),50),this.activeView=b,Ro.views[a]&&Ro.views[a].dom&&Ro.views[a].dom.setAttribute("background","true"),Ro.views[b]&&Ro.views[b].dom&&Ro.views[b].dom.setAttribute("background","false")}}})}(),function(){xtag.register("ro-back-button",{lifecycle:{created:function(){this.addListeners()},inserted:function(){Ro.Environment.platform.isIOS||Ro.Environment.platform.isFxOS||(this.style.display="none")},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{addListeners:function(){this.addEventListener("click",function(){Ro.Globals.backButtonFunction()},!0)},registerBackAction:function(a){Ro.Globals=Ro.Globals||{},Ro.Globals.backButtonFunction=a}}})}(),function(){xtag.register("ro-button",{lifecycle:{created:function(){this.addListeners()},inserted:function(){},removed:function(){}},events:{reveal:function(){},click:function(){this.clickCallback&&this.clickCallback()}},accessors:{},clickCallback:function(){},methods:{addListeners:function(){var a=new Function(this.getAttribute("action"));this.addEventListener("click",a)},setClickCallback:function(a){this.clickCallback=a}}})}(),function(){xtag.register("ro-checkbox",{lifecycle:{created:function(){this.firstElementChild||(this.checkInput=document.createElement("input"),this.checkInput.addEventListener("click",function(a){a.preventDefault()}),this.setAttribute("checked",!1),this.addEventListener("click",this.toggleCheck),this.checkInput.type="checkbox",this.appendChild(this.checkInput))},inserted:function(){},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{addListeners:function(){var a=new Function(this.getAttribute("action"));this.addEventListener("click",a)},toggleCheck:function(){this.checkInput.checked?this.uncheck():this.check()},check:function(){this.checkInput.checked=!0,this.setAttribute("checked",!0)},uncheck:function(){this.checkInput.checked=!1,this.setAttribute("checked",!1)},value:function(){return!!this.checkInput.checked}}})}(),function(){xtag.register("ro-draw",{lifecycle:{inserted:function(){this.renderCanvas()}},events:{"touchstart:delegate(ro-draw > canvas)":function(){this.parentNode.movements=[]},"touchend:delegate(ro-draw > canvas)":function(){this.parentNode.movements=[]},"touchmove:delegate(ro-draw > canvas)":function(a){this.parentNode.drawLine(a)},"mousedown:delegate(ro-draw > canvas)":function(){this.parentNode.movements=[]},"mouseup:delegate(ro-draw > canvas)":function(){this.parentNode.movements=[]},"mousemove:delegate(ro-draw > canvas)":function(a){this.parentNode.drawLine(a)}},methods:{renderCanvas:function(){if(!this.querySelector("canvas")){var a=document.createElement("canvas");a.width=this.offsetWidth,a.height=this.offsetHeight,this.appendChild(a)}},drawLine:function(a){this.movements=this.movements||[];var b=a.changedTouches[0],c=b.clientX-this.offsetLeft,d=b.clientY-this.offsetTop,e=this.movements.length,f=this.querySelector("canvas").getContext("2d");if((Ro.Environment.platform.isIOS||Ro.Environment.platform.isWPhone)&&(d-=50),f.strokeStyle=this.getAttribute("strokeStyle"),f.lineJoin=this.getAttribute("lineJoin"),f.lineWidth=this.getAttribute("lineWidth"),f.beginPath(),e){var g=e-1,h=this.movements[g];f.moveTo(h[0],h[1])}else f.moveTo(c,d);f.lineTo(c,d),f.closePath(),f.stroke(),this.movements.push([c,d])},eraseAllcontent:function(){var a=this.querySelector("canvas");if(a){var b=a.getContext("2d");b.clearRect(0,0,this.offsetWidth,this.offsetHeight)}},getDraw:function(){return this.querySelector("canvas").getContext("2d").canvas.toDataURL()}}})}(),function(){xtag.register("ro-float-menu",{lifecycle:{created:function(){},inserted:function(){this.create()},removed:function(){}},events:{reveal:function(){},"click:delegate(ro-float-menu ro-item)":function(a){}},accessors:{},methods:{create:function(){this.xtag.itemsAreVisible=!1,this.xtag.click=!0,this.insert(),this.parseList()},insert:function(){var a=this.parentElement.querySelector("ro-overlay");if(!a){var b=document.createElement("ro-overlay"),c=document.createElement("ro-hitarea");c.setAttribute("onclick","this.parentNode.toggleMenu ()"),this.parentElement.appendChild(b),this.appendChild(c)}},recreate:function(){var a=this.parentElement.querySelector("ro-overlay"),b=this.querySelector("ro-hitarea");a&&a.parentElement.removeChild(a),b&&b.parentElement.removeChild(b),this.create()},addItem:function(a){},removeItem:function(a){},toggleMenu:function(){this.xtag.click&&(this.xtag.click=!1,setTimeout(function(){this.xtag.itemsAreVisible?(this.hideItems(),this.xtag.click=!0):(this.showItems(),this.xtag.click=!0)}.bind(this),100))},hideItems:function(){this.setAttribute("state","hideItems"),this.nextElementSibling&&this.nextElementSibling.setAttribute("state","hideItems"),this.xtag.itemsAreVisible=!1},showItems:function(){this.setAttribute("state","showItems"),this.nextElementSibling&&this.nextElementSibling.setAttribute("state","showItems"),this.xtag.itemsAreVisible=!0},parseList:function(){for(var a=this.querySelectorAll("ro-item"),b="",c=0;c<a.length;c++)b=a[c].getAttribute("i18nKey")||a[c].getAttribute("text"),a[c].setAttribute("text",Ro.templateEngine(b)),a[c].setAttribute("onclick",a[c].getAttribute("action")+"; (this.parentNode) ? this.parentNode.hideItems() : false;")}}})}(),function(){xtag.register("ro-header",{lifecycle:{created:function(){Ro.Environment.platform.isIOS&&(this.style.paddingTop="20px")},inserted:function(){},removed:function(){}},events:{},accessors:{},methods:{}})}(),function(){xtag.register("ro-inline-menu",{lifecycle:{created:function(){this.hide()},inserted:function(){this.parseLayout()},removed:function(){},attributeChanged:function(){}},events:{"click:delegate(ro-inline-menu ro-item.hideInlineMenu)":function(a){this.parentNode.hide(),a.stopImmediatePropagation()},"click:delegate(ro-inline-menu ro-item)":function(a){var b=this.getAttribute("action");b&&(b=new Function(b),b.apply(b,[this])),a.stopImmediatePropagation()}},methods:{hideAllMenus:function(){for(var a=function(a){for(var b=a,c=b.nodeName.toLowerCase();"ro-list"!==c&&(b=b.parentNode,c=b.nodeName.toLocaleLowerCase(),"body"!==b););return b},b=a(this),c=b.querySelectorAll('ro-inline-menu[state="showItems"]'),d=0,e=c.length;e>d;d++){var f=c[d];f.hide()}},show:function(){var a=this.getAttribute("viewSingletonMenu");a&&this.hideAllMenus(),this.xtag.isVisible=!0,this.setAttribute("state","showItems")},hide:function(){this.xtag.isVisible=!1,this.setAttribute("state","hideItems")},toggle:function(){this.xtag.isVisible?this.hide():this.show()},removeHideButton:function(){var a=this.querySelector("ro-item.hideInlineMenu");a&&this.removeChild(a)},parseLayout:function(){this.removeHideButton();for(var a=this.getAttribute("buttonHideMenu"),b=this.querySelectorAll("ro-item"),c=b.length,d=function(){var a=document.createElement("ro-item");return a.setAttribute("icon",""),a.setAttribute("class","hideInlineMenu"),a},e=0;c>e;e++){var f=b[e];f.setAttribute("text",Ro.templateEngine(f.getAttribute("i18nKey")))}a&&this.appendChild(d()),this.parentNode.className=this.parentNode.className.replace("hasMenuInline").trim(),this.parentNode.className+=" hasMenuInline"}}})}(),function(){xtag.register("ro-input",{lifecycle:{created:function(){this.innerHTML.trim()||(this.xtag.field=document.createElement("input"),function(a,b){var c,d;Object.keys(b).forEach(function(e){c=b[e].name,d=b[e].value,a.setAttribute(c,d)})}(this.xtag.field,this.attributes),this.addPlaceholder(),this.addIcon(),this.appendChild(this.xtag.field),this.removeAttribute("i18n"))},inserted:function(){},removed:function(){}},events:{"keyup:delegate(input)":function(a){var b=this.getAttribute("maxsize");b&&this.value.length>b&&(this.value=this.value.substr(0,b))}},accessors:{},methods:{addPlaceholder:function(){var a=this.getAttribute("placeholder");(a||""===a)&&(this.xtag.field.setAttribute("i18n",this.getAttribute("i18n")),this.xtag.field.setAttribute("i18nKey",this.getAttribute("i18nKey")),this.xtag.field.placeholder=a),delete a},addIcon:function(){var a=this.getAttribute("icon");a&&(this.xtag.icon=document.createElement("ro-icon"),this.xtag.icon.setAttribute("iconName",a),this.appendChild(this.xtag.icon)),delete a},validate:function(){var a=this.querySelector("input").value,b=this.getAttribute("mandatory"),c=this.getAttribute("maxsize"),d=this.getAttribute("pattern"),e=!0;return c&&a.length>c&&(e="MAXSIZE"),d&&a.match(new RegExp(d))[0]!==a&&(e="PATTERN"),null!==b&&0===a.length&&(e="MANDATORY"),e}}})}(),function(){xtag.register("ro-layout",{lifecycle:{created:function(){this.template=this.innerHTML},inserted:function(){},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{setData:function(a){this.xtag.data=a,this.parseLayout()},parseLayout:function(){var a=this.xtag.data;xtag.innerHTML(this,Ro.templateEngine(this.template,a))}}})}(),function(){xtag.register("ro-list",{lifecycle:{created:function(){var a=this.querySelector("ro-nodata-item"),b=this.querySelector("ro-item");this.xtag.item=this.querySelector("ro-item"),this.buttons={},b&&(this.xtag.itemTemplate=b.innerHTML),a&&(this.xtag.noDataItemTemplate=a.innerHTML),this.addButton({name:"delete",action:function(){var a=document.createElement("ro-button");return a.innerHTML="DELETE",a}}),this.addButton({name:"share",action:function(){var a=document.createElement("ro-button");return a.innerHTML="SHARE",a}}),this.xtag.callbacks={didSelectedItem:function(a){},didUnSelectedItem:function(a){},didSwipeItem:function(a){}},this.renderes={listItem:this.listItem},a=null},inserted:function(){this.activeButtons=this.getButtonsInfo();var a=this.parentElement.nextElementSibling;a&&"RO-FOOTER"===a.tagName&&(this.style.cssText=Ro.styleGenerator({height:"-webkit-calc(100% - 100px)",height:"-moz-calc(100% - 100px)",height:"calc(100% - 100px)"})),a=null},removed:function(){}},events:{"click:delegate(ro-item-content)":function(a){var b=this.parentNode.getAttribute("action");b&&new Function(b)(this),a.stopImmediatePropagation(),b=null}},methods:{setData:function(a){this.xtag.data=a,this.parseList()},addData:function(a){this.xtag.data.push(a)},removeDataItem:function(a){this.xtag.data.splice(a,1)},getData:function(){return this.xtag.data},setAction:function(a){this.action=a},parseList:function(){var a=this.xtag.data,b=a.length;if(xtag.innerHTML(this,""),this.xtag.itemAction=this.action||this.xtag.item.getAttribute("action"),b)a.forEach(function(a,b){this.renderes.listItem.apply(this,[a,b])}.bind(this));else if(this.xtag.noDataItemTemplate){var c=document.createElement("ro-nodata-item");c.innerHTML=Ro.templateEngine(this.xtag.noDataItemTemplate,[]),this.appendChild(c)}a=null,b=null},getButtonsInfo:function(){var a=this.getAttribute("actionButtons"),b=!1;return a&&(b=a.split(",").map(function(a){return this.buttons[a.trim()]}.bind(this))),a=null,b},addButton:function(a){this.buttons[a.name]=a.action},checkBoxAction:function(a){a.target.parentElement.querySelector('input[type="checkbox"]').checked?(a.target.parentElement.parentElement.setAttribute("checked",!0),this.xtag.callbacks.didSelectedItem(a)):(a.target.parentElement.parentElement.removeAttribute("checked"),this.xtag.callbacks.didUnSelectedItem(a))},renderSelectableButton:function(a){var b=document.createElement("ro-checkbox");return b.appendChild(this.renderes.selectableButton(a)),b.addEventListener("click",this.checkBoxAction.bind(this)),b},selectedItems:function(){return this.querySelectorAll('ro-item[checked="true"]')},selectableButton:function(){return document.createTextNode("")},listItem:function(a,b){var c=document.createElement("ro-item"),d=document.createElement("ro-item-content");if(a.itemIndex=b,c.setAttribute("action",Ro.templateEngine(this.xtag.itemAction,a)),c.setAttribute("itemIndex",b),d.innerHTML=Ro.templateEngine(this.xtag.itemTemplate,a),this.getAttribute("swipeable")&&(c.appendChild(this.renderSwipeMenu()),this.addSwipeMenuActions(c,this)),this.activeButtons)for(var e=0;e<this.activeButtons.length;e++)c.appendChild(this.activeButtons[e]());this.getAttribute("selectable")&&c.appendChild(this.renderSelectableButton(a)),c.appendChild(d),this.appendChild(c),c=null,d=null},setCallback:function(a){this.xtag.callbacks[a.name]=a.action},setRenderer:function(a){this.renderes[a.name]=a.action},renderSwipeMenu:function(){var a=document.createElement("ro-item-swipemenu");a.setAttribute("swipeMenuLabel",Ro.templateEngine(this.getAttribute("i18nKey")));var b=this.getAttribute("swipeflow");return b&&a.setAttribute("pan",b),a},addSwipeMenuActions:function(a,b){var c=new Hammer(a),d=function(b){var c=a.firstElementChild,d=b.deltaX,e=d;"panleft"===b.type&&(e=-1*d),c&&e>window.innerWidth/2?c.className="goMenu":c&&e>50&&(c.className="",c.style.webkitTransform="translateX("+d+"px)",c.style.transform="translateX("+d+"px)")},e=function(c){var d=a.firstElementChild,e=c.deltaX,f=e;0>e&&(f=-1*e),d&&f<window.innerWidth/2?d.className="backMenu":-1!==d.className.indexOf("goMenu")&&(b.xtag.callbacks.didSwipeItem(a),setTimeout(function(a){a.firstElementChild.className="backMenu"}(a),1e3))},f=this.getAttribute("swipeflow");f||(f="panright"),c.on(f,d),c.on("panend",e)},clear:function(){Ro.DOM.purge(this),Ro.DOM.vanish(this),this.innerHTML=""}}})}(),function(){xtag.register("ro-loader",{lifecycle:{created:function(){},inserted:function(){},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{show:function(){this.style.cssText=Ro.styleGenerator({display:"block",width:"100vw",height:"100vh"})},hide:function(){this.style.cssText=Ro.styleGenerator({display:"none",width:"0",height:"0"})}}})}(),function(){xtag.register("ro-map",{lifecycle:{created:function(){Ro=Ro||{},Ro.Session=Ro.Session||{},Ro.Session.Map=Ro.Session.Map||{}},inserted:function(){!this.querySelector("ro-map-canvas")&&this.querySelector("ro-layer")&&this.parse()},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{parse:function(){this.parseLayers(),this.map=document.createElement("ro-map-canvas"),this.appendChild(this.map),this.getAttribute("layerGroup")&&this.createLayerGroup(),this.crs=this.getAttribute("projection")||"EPSG:3857";var a=this.getAttribute("latitude")||"0",b=this.getAttribute("longitude")||"0",c=this.getAttribute("zoom")||"1",d=this.getAttribute("maxZoom")||"22",e=this.getAttribute("minZoom")||"1",f=[parseFloat(b),parseFloat(a)],g={center:f,projection:this.crs,zoom:parseInt(c),maxZoom:parseInt(d),minZoom:parseInt(e)};"EPSG:3857"!==this.crs&&(g.projection=this.crs),this.olMap=new ol.Map({layers:this.olLayers,target:this.map,renderer:"canvas",pixelRatio:1,view:new ol.View(g)})},parseLayers:function(){this.olLayers=[],this.roLayers?this.innerHTML="":this.roLayers=this.querySelectorAll("ro-layer");for(var a=0;a<this.roLayers.length;a++)this.olLayers.push(this.layerBuilder(this.roLayers[a]))},layerBuilder:function(a){var b,c=a.getAttribute("source")||"OSM",d=a.getAttribute("imagerySet")||"",e=!!a.getAttribute("visible"),f=a.getAttribute("url")||"",g=a.getAttribute("format")||"image/png8",h=a.getAttribute("layers")||"",i=a.getAttribute("servertype")||"geoserver",j=a.getAttribute("tilesize")||"512",k=a.getAttribute("CQL_FILTER")||"",l=a.getAttribute("version")||"1.1.1";switch(c){case"OSM":return new ol.layer.Tile({source:new ol.source.OSM,visible:e});case"Bing":return new ol.layer.Tile({source:new ol.source.BingMaps({key:"Ak-dzM4wZjSqTlzveKz5u0d4IQ4bRzVI309GxmkgSVr1ewS6iPSrOvOKhA-CJlm3",imagerySet:d,visible:e})});case"Google":return this.layerCrs="EPSG:3857",new ol.layer.Tile({source:new ol.source.OSM({url:this.googleURLSwich(d)})});case"WMS":var m,n=ol.proj.get("EPSG:4326"),o=n.getExtent(),p=new Array(16),q=ol.extent.getWidth(o)/parseInt(j);for(m=0;16>m;++m)p[m]=q/Math.pow(2,m);this.layerCrs="EPSG:4326";var r={LAYERS:h,FORMAT:g,TRANSPARENT:"true",VERSION:l,FORMAT_OPTIONS:"",TILED:!0};return k&&(r.CQL_FILTER=k),b=new ol.layer.Tile({source:new ol.source.TileWMS({url:f,params:r,serverType:i})});default:return new ol.layer.Tile({source:new ol.source.OSM,resolutions:p,visible:e})}},googleURLSwich:function(a){switch(a){case"streets":return"http://mt1.google.com/vt/lyrs=m@146&hl=en&x={x}&y={y}&z={z}";case"traffic":return"http://mt1.googleapis.com/vt?lyrs=m@226070730,traffic&src=apiv3&hl=en-US&x={x}&y={y}&z={z}&apistyle=s.t:49|s.e:g|p.h:#ff0022|p.s:60|p.l:-20,s.t:50|p.h:#2200ff|p.l:-40|p.v:simplified|p.s:30,s.t:51|p.h:#f6ff00|p.s:50|p.g:0.7|p.v:simplified,s.t:6|s.e:g|p.s:40|p.l:40,s.t:49|s.e:l|p.v:on|p.s:98,s.t:19|s.e:l|p.h:#0022ff|p.s:50|p.l:-10|p.g:0.9,s.t:65|s.e:g|p.h:#ff0000|p.v:on|p.l:-70&style=59,37|smartmaps";case"bicycling":return"http://mt1.google.com/vt/lyrs=m@121,bike&hl=en&x={x}&y={y}&z={z}";case"transit":return"http://mt1.google.com/vt/lyrs=m@121,transit|vm:1&hl=en&opts=r&x={x}&y={y}&z={z}";case"aerialLand":return"https://khms0.googleapis.com/kh?v=142&hl=en-US&x={x}&y={y}&z={z}";case"aerielStreets":return"https://mts1.google.com/vt/lyrs=h@245180971&hl=pt-BR&src=app&x={x}&y={y}&z={z}&s=Galileo";default:return"http://mt1.google.com/vt/lyrs=m@146&hl=en&x={x}&y={y}&z={z}"}},showLayer:function(a){for(var b=0;b<this.olLayers.length;b++)this.olLayers[b].setVisible(!1);this.olLayers[a].setVisible(!0)},createLayerGroup:function(){this.layerGroup=document.createElement("ro-map-layer-group"),this.layerGroup.setAttribute("visible","false");for(var a=0;a<this.olLayers.length;a++){var b=document.createElement("ro-item");b.innerHTML=this.roLayers[a].getAttribute("label"),b.addEventListener("click",this.showLayer.bind(this,a)),this.layerGroup.appendChild(b)}this.layerGroup.addEventListener("click",this.toggleLayerGroup.bind(this)),this.appendChild(this.layerGroup)},toggleLayerGroup:function(){"true"===this.layerGroup.getAttribute("visible")?this.hideLayerGroup():this.showLayerGroup()},showLayerGroup:function(){this.layerGroup.setAttribute("visible",!0)},hideLayerGroup:function(){this.layerGroup.setAttribute("visible",!1)},setCenter:function(a){var b=this.olMap.getView(),c=this.convertProjection(a);b.setCenter(c)},setZoom:function(a){var b=this.olMap.getView();b.setZoom(a)},convertProjection:function(a){if(this.layerCrs&&this.crs!==this.layerCrs)var b=ol.proj.transform([a.longitude,a.latitude],this.crs,this.layerCrs);else b=[a.longitude,a.latitude];return b},addMarker:function(a,b){if(a.longitude&&a.latitude&&this.olMap){var c=document.createElement("div"),d=this.convertProjection(a);
c.className="roMarker",b&&c.appendChild(b);var e=new ol.Overlay({element:c,positioning:"buttom-left",stopEvent:!1});e.setPosition(d),this.olMap.addOverlay(e)}else console.log("latitude and longitude are mandatory")},addMarkers:function(){},markerFocus:function(a){var b=document.createElement("div"),c=this.convertProjection(a),d=new ol.Overlay({element:b,positioning:"buttom-left",stopEvent:!1}),e=function(a,b){return function(){a.olMap.removeOverlay(b)}}(this,d);Ro.Session.Map.timeOutMarkerFocus&&(this.olMap.removeOverlay(Ro.Session.Map.previousMarkerFocused),clearTimeout(Ro.Session.Map.timeOutMarkerFocus),Ro.Session.Map.timeOutMarkerFocus=null,Ro.Session.Map.previousMarkerFocused=null),b.className="focusMaker",d.setPosition(c),this.olMap.addOverlay(d),Ro.Session.Map.previousMarkerFocused=d,Ro.Session.Map.timeOutMarkerFocus=setTimeout(e,1e3)},fitToBound:function(){for(var a=this.olMap.getOverlays(),b=this.olMap.getView(),c=a.getArray(),d=[],e=0,f=c.length;f>e;e++)c[e].getPosition()&&!c[e].currentPosition&&d.push(c[e].getPosition());if(d.length){for(var f=d[0][1],g=d[0][1],h=d[0][0],i=d[0][0],e=0,j=d.length;j>e;e++)f<d[e][1]&&(f=d[e][1]),g>d[e][1]&&(g=d[e][1]),h<d[e][0]&&(h=d[e][0]),i>d[e][0]&&(i=d[e][0]);featureMultiLine=new ol.Feature;var k=new ol.geom.LineString([[i,f],[h,f],[h,g],[i,g]]);b.fitExtent(k.getExtent(),this.olMap.getSize())}},clear:function(){if(this.olMap)for(var a=this.olMap.getOverlays().getArray(),b=this.olMap,c=a.length;c>0;c--)a[c-1]&&!a[c-1].currentPosition&&b.removeOverlay(a[c-1])},getOLMap:function(){return this.olMap}}})}(),function(){xtag.register("ro-stage",{lifecycle:{created:function(){},inserted:function(){},removed:function(){}},events:{reveal:function(){}},accessors:{},methods:{showLoader:function(){this.setAttribute("loading",!0)},hideLoader:function(){this.setAttribute("loading",!1)}}})}(),function(){xtag.register("ro-tabs",{lifecycle:{created:function(){},inserted:function(){},removed:function(){}},events:{"tap:delegate(ro-tabs-labels ro-tab-label)":function(){var a=this.parentElement.parentElement.parentElement;"RO-TABS"!==a.tagName&&(a=this.parentElement.parentElement);var b=this.getAttribute("tabindex"),c=a.querySelector('ro-tab[tabindex="'+b+'"]');a.tabClickCallback(this,c)}},accessors:{},methods:{render:function(){var a=[],b=this.querySelector("ro-tabs-labels"),c=this.querySelectorAll("ro-tab"),d=this.getAttribute("tabwidth"),e=this.querySelector("ro-tab-label-template"),f=document.createElement("div"),g=document.createElement("div");if(f.className="roTabLabelsWrapper",g.className="roTabContentWrapper",!b){this.getTabLabelTemplate();for(var h=0;h<c.length;h++)a.push(c[h].cloneNode(!0));this.tabsLabelGroup=document.createElement("ro-tabs-labels"),this.tabsContentGroup=document.createElement("ro-tabs-contents"),d&&(this.innerHTML="");for(var h=0;h<a.length;h++){var i=document.createElement("ro-tab-label");e?xtag.innerHTML(i,Ro.templateEngine(this.xtag.labelTemplate)):(i.setAttribute("i18nKey",a[h].getAttribute("label")),i.setAttribute("i18n",""),i.innerHTML=Ro.i18n.getTranslationByKey(i.getAttribute("i18nKey"))),i.setAttribute("tabIndex",h),a[h].setAttribute("tabIndex",h),a[h].getAttribute("selected")?(a[h].style.display="block",i.setAttribute("selected",!0)):a[h].style.display="none",d?(this.tabsLabelGroup.setAttribute("style","overflow: hidden"),this.tabsContentGroup.setAttribute("style","overflow: hidden"),i.setAttribute("style","width: "+d),a[h].setAttribute("style","width: "+window.innerWidth+"px"),f.appendChild(i),g.appendChild(a[h])):this.tabsLabelGroup.appendChild(i)}d?(this.tabsLabelGroup.appendChild(f),this.tabsContentGroup.appendChild(g),this.appendChild(this.tabsLabelGroup),this.appendChild(this.tabsContentGroup),this.scrollBehavior()):this.insertBefore(this.tabsLabelGroup,c[0])}},scrollBehavior:function(){var a=(this.querySelectorAll("ro-tabs-labels ro-tab-label"),this.querySelectorAll("ro-tab")),b=this.getAttribute("tabwidth"),c=this.querySelectorAll("ro-tab-label"),d=this.querySelector(".roTabLabelsWrapper"),e=this.querySelector(".roTabContentWrapper"),f=this.querySelector("ro-tabs-labels"),g=this.querySelector("ro-tabs-contents"),h={scrollbars:!1,scrollX:!0,scrollY:!1,mouseWheel:!1,disableMouse:!1,disablePointer:!0,disableTouch:!0,probeType:1,click:!0,snap:!0,preventDefault:!0};if(b){for(var i=0,j=c.length*window.innerWidth,k=0;k<c.length;k++)i+=c[k].getBoundingClientRect().width;d.style.width=i+"px",e.style.width=j+"px",setTimeout(function(a,b,c,d){return function(){if(b.children[0]){a.myScroll=new IScroll(b,{scrollbars:!1,scrollX:!0,scrollY:!1,mouseWheel:!1,probeType:1,click:!0,preventDefault:!0,snap:"ro-tab-label"}),Ro.Environment.platform.isWPhone&&(h.disableMouse=!0),a.contentScroll=new IScroll(c,h),a.contentScrollTab={};for(var e=0;e<d.length;e++)setTimeout(function(a,b,c){a.contentScrollTab[b+"scroll"]=new IScroll(c,{scrollbars:!1,scrollX:!1,scrollY:!0,mouseWheel:!1,disableMouse:!1,disablePointer:!0,disableTouch:!1,probeType:1,click:!0,snap:!1,preventDefault:!0})}(a,e,d[e]),100);a.myScroll.on("scroll",function(){}),a.myScroll.on("scrollEnd",function(){this.tabClickCallback(this.eligibleTab())}.bind(a))}}}(this,f,g,a),100)}},tabClickCallback:function(a){var b,c,d=a.parentNode;d&&(b=a.parentNode.parentNode.parentNode,"RO-TABS"!==b.tagName&&(b=a.parentNode.parentNode),c=b.querySelector('ro-tab[tabindex="'+a.getAttribute("tabindex")+'"]'),this.setActive(a,c))},setActive:function(a,b){var c=this.getAttribute("tabwidth");c&&setTimeout(function(a,b){return function(){a.scrollToTab(b)}}(this,a),50),setTimeout(function(a,b,c){return function(){c.hideOtherTabs(),a.setAttribute("selected",!0),b.setAttribute("selected",!0),b.style.display="block"}}(a,b,this),100)},hideOtherTabs:function(){for(var a=this.querySelectorAll("ro-tab-label"),b=this.querySelectorAll("ro-tab"),c=0;c<a.length;c++)a[c].removeAttribute("selected"),b[c].removeAttribute("selected")},getActive:function(){var a=this.querySelector('ro-tab-label[selected="true"]');return a||(a=this.querySelector('ro-tab-label[tabindex="0"]')),a},goToNextTab:function(){var a=this.getActive(),b=a.nextElementSibling;b&&this.tabClickCallback(b)},goToPreviousTab:function(){var a=this.getActive(),b=a.previousElementSibling;b&&this.tabClickCallback(b)},scrollToTab:function(a){if(a){var b=a.getBoundingClientRect(),c=a.parentNode.getBoundingClientRect().width,d=this.getActive(),e=d.getBoundingClientRect(),f=parseInt(a.getAttribute("tabindex")),g=b.width*f-parseInt(b.width/3),h=-1;0>g&&(g=0),g+b.width+parseInt(b.width/3)===c&&(g=b.width*f-(window.innerWidth-b.width)),b.left>0&&b.left<e.left&&(h=1),d.getAttribute("tabindex")!==a.getAttribute("tabindex")&&setTimeout(function(a,b,c,d){return function(){var e=300;Ro.Environment.platform.isWPhone&&(e=50),a.myScroll.scrollTo(b*c,0,e),a.contentScroll.scrollTo(d*window.innerWidth*c,0,e)}}(this,g,h,f),100)}},eligibleTab:function(){for(var a=this.querySelectorAll("ro-tab-label"),b=window.innerWidth,c={},d=0;d<a.length;d++)if(c=a[d].getBoundingClientRect(),c.left>0&&c.right<b)return a[d];return!1},getTabLabelTemplate:function(){var a=this.querySelector("ro-tab-label-template");a&&(this.xtag.template=a.cloneNode(!0),this.xtag.labelTemplate=a.innerHTML,this.labelTemplate=a.innerHTML)},setTabLabelData:function(a){for(var b=this.xtag.labelTemplate,c=this.querySelectorAll("ro-tab-label"),d=0;d<c.length;d++)xtag.innerHTML(c[d],Ro.templateEngine(b,a[d]))},removeTabByIndex:function(a){var b=this.querySelector('ro-tab-label[tabindex="'+a+'"]'),c=this.querySelector('ro-tab[tabindex="'+a+'"]'),d=this.querySelector("div.roTabContentWrapper"),e=this.querySelector("div.roTabLabelsWrapper"),f=b.getBoundingClientRect();b.parentNode.removeChild(b),c.parentNode.removeChild(c);for(var g=this.querySelectorAll("ro-tab-label"),h=this.querySelectorAll("ro-tab"),i=0;i<h.length;i++)h[i].setAttribute("tabindex",i),g[i].setAttribute("tabindex",i);e.style.width=h.length*f.width+"px",d.style.width=h.length*window.innerWidth+"px",this.setActive(g[0],h[0]);try{this.contentScroll.refresh(),this.myScroll.refresh()}catch(j){}}}})}(),function(){xtag.register("ro-title",{lifecycle:{created:function(){},inserted:function(){},removed:function(){}},events:{},accessors:{},methods:{}})}(),function(){xtag.register("ro-view",{lifecycle:{created:function(){Ro.Environment.platform.isIOS&&!this.className.match(/isIOS/)?this.className+="isIOS ":Ro.Environment.platform.isWPhone&&!this.className.match(/isWPhone/)&&(this.className+="isWPhone ")},inserted:function(){},removed:function(){}},events:{},accessors:{},methods:{show:function(a){this.xtag.showFunction&&this.xtag.showFunction(a)},setShowFunction:function(a){this.xtag.showFunction=a}}})}();